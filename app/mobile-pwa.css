/* Mobile and PWA optimizations for Cassa page */

/* Touch-friendly tap targets */
@media (max-width: 640px) {
  /* Ensure minimum 44x44px tap targets as per Material Design guidelines */
  button, 
  a, 
  [role="button"],
  .clickable,
  .cursor-pointer {
    min-height: 44px;
    min-width: 44px;
    position: relative;
  }
  
  /* Better touch feedback */
  button:active,
  a:active,
  [role="button"]:active,
  .clickable:active,
  .cursor-pointer:active {
    transform: scale(0.98);
    opacity: 0.9;
  }
  
  /* Remove hover effects on touch devices */
  @media (hover: none) {
    button:hover,
    a:hover,
    [role="button"]:hover,
    .clickable:hover,
    .cursor-pointer:hover {
      transform: none !important;
    }
  }
  
  /* Better spacing for mobile cards */
  .grid > * {
    transition: transform 0.2s ease;
  }
  
  /* Smooth scrolling */
  .overflow-y-auto,
  .overflow-auto {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
  }
  
  /* Prevent text selection on interactive elements */
  button,
  a,
  [role="button"] {
    -webkit-user-select: none;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
  }
  
  /* Better modal animations */
  .fixed[class*="translate"] {
    will-change: transform;
  }
  
  /* Optimize font sizes for mobile */
  .text-xs {
    font-size: 0.8125rem; /* 13px instead of 12px */
  }
  
  .text-sm {
    font-size: 0.9375rem; /* 15px instead of 14px */
  }
  
  /* Better input fields for mobile */
  input,
  textarea,
  select {
    font-size: 16px !important; /* Prevents zoom on iOS */
    padding: 12px !important;
    min-height: 48px;
  }
  
  /* Fix for modals on small screens */
  .fixed.inset-0 {
    padding-bottom: env(safe-area-inset-bottom);
    padding-top: env(safe-area-inset-top);
  }
  
  /* Better floating action button position */
  .fixed.bottom-4.right-4 {
    bottom: calc(1rem + env(safe-area-inset-bottom));
    right: calc(1rem + env(safe-area-inset-right));
  }
}

/* PWA Standalone mode specific styles */
@media all and (display-mode: standalone) {
  /* Add padding for iOS status bar */
  body {
    padding-top: env(safe-area-inset-top);
  }
  
  /* Adjust header position */
  header,
  .sticky,
  [class*="sticky"] {
    top: env(safe-area-inset-top);
  }
  
  /* Better scroll behavior in PWA */
  html {
    overscroll-behavior: none;
  }
  
  body {
    overscroll-behavior-y: contain;
  }
  
  /* Prevent pull-to-refresh on Chrome PWA */
  body {
    overscroll-behavior: contain;
  }
}

/* Tablet optimizations */
@media (min-width: 641px) and (max-width: 1024px) {
  /* Use 2 columns on tablets in portrait */
  .grid.grid-cols-1.sm\:grid-cols-2 {
    grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
  }
  
  /* Adjust modal widths for tablets */
  .sm\:max-w-3xl {
    max-width: 90vw !important;
  }
  
  .sm\:max-w-4xl {
    max-width: 95vw !important;
  }
}

/* Landscape mobile optimizations */
@media (max-height: 500px) and (orientation: landscape) {
  /* Reduce vertical padding in landscape */
  .p-4,
  .py-4 {
    padding-top: 0.5rem !important;
    padding-bottom: 0.5rem !important;
  }
  
  /* Adjust modal heights */
  .max-h-\[80vh\],
  .max-h-\[85vh\],
  .max-h-\[90vh\] {
    max-height: 95vh !important;
  }
  
  /* Hide less important elements */
  .text-xs.uppercase.tracking-wider {
    display: none;
  }
}

/* Performance optimizations */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Dark mode optimizations for OLED screens */
@media (prefers-color-scheme: dark) {
  /* True black for OLED power saving */
  :root {
    --pure-black: #000000;
  }
  
  /* Apply true black to backgrounds in dark mode */
  [data-theme="dark"] body,
  [data-theme="dark"] .bg-gray-900,
  [data-theme="dark"] .bg-slate-900 {
    background-color: var(--pure-black);
  }
}

/* Accessibility improvements */
@media (prefers-contrast: high) {
  /* Increase border contrast */
  [class*="border"] {
    border-width: 2px !important;
  }
  
  /* Better focus indicators */
  *:focus-visible {
    outline: 3px solid currentColor !important;
    outline-offset: 2px !important;
  }
}

/* iOS specific fixes */
@supports (-webkit-touch-callout: none) {
  /* Fix for iOS rubber band scrolling */
  .fixed {
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
  }
  
  /* Fix for iOS modal positioning */
  .fixed.inset-0 {
    position: fixed;
    position: -webkit-fixed;
  }
  
  /* Prevent iOS zoom on input focus */
  input[type="text"],
  input[type="email"],
  input[type="number"],
  input[type="tel"],
  textarea,
  select {
    font-size: 16px !important;
  }
}

/* Android specific fixes */
@media (hover: none) and (pointer: coarse) {
  /* Better touch targets for Android */
  button,
  a,
  [role="button"] {
    padding: 12px !important;
    margin: 2px;
  }
  
  /* Fix for Android keyboard */
  input:focus,
  textarea:focus,
  select:focus {
    position: relative;
    z-index: 1;
  }
}

/* Print styles */
@media print {
  /* Hide unnecessary elements when printing */
  button,
  .fixed,
  .sticky,
  nav,
  header,
  footer,
  .no-print {
    display: none !important;
  }
  
  /* Better print layout */
  .grid {
    display: block !important;
  }
  
  .grid > * {
    page-break-inside: avoid;
    margin-bottom: 1rem;
  }
}